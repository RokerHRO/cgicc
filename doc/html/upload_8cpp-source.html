<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
   "http://www.w3.org/TR/REC-html40/loose.dtd">

<html lang="en" dir="LTR">

<head>
  <!-- $Id: header.html,v 1.5 2004/06/12 01:58:25 sbooth Exp $ -->
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <title>upload.cpp Source File</title>
  <link rev="made" href="mailto:bug-cgicc@gnu.org" />
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="cgicc-doc.css" rel="stylesheet" type="text/css" />
</head>

<body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>upload.cpp</h1><a href="upload_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment"> *  $Id: upload.cpp,v 1.7 2003/07/13 14:22:57 sbooth Exp $</span>
00003 <span class="comment"> *</span>
00004 <span class="comment"> *  Copyright (C) 1996 - 2003 Stephen F. Booth</span>
00005 <span class="comment"> *</span>
00006 <span class="comment"> *  This program is free software; you can redistribute it and/or modify</span>
00007 <span class="comment"> *  it under the terms of the GNU General Public License as published by</span>
00008 <span class="comment"> *  the Free Software Foundation; either version 2 of the License, or</span>
00009 <span class="comment"> *  (at your option) any later version.</span>
00010 <span class="comment"> *</span>
00011 <span class="comment"> *  This program is distributed in the hope that it will be useful,</span>
00012 <span class="comment"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00013 <span class="comment"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00014 <span class="comment"> *  GNU General Public License for more details.</span>
00015 <span class="comment"> *</span>
00016 <span class="comment"> *  You should have received a copy of the GNU General Public License</span>
00017 <span class="comment"> *  along with this program; if not, write to the Free Software</span>
00018 <span class="comment"> *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
00019 <span class="comment"> */</span>
00020 
00028 <span class="preprocessor">#include &lt;new&gt;</span>
00029 <span class="preprocessor">#include &lt;string&gt;</span>
00030 <span class="preprocessor">#include &lt;vector&gt;</span>
00031 <span class="preprocessor">#include &lt;stdexcept&gt;</span>
00032 <span class="preprocessor">#include &lt;iostream&gt;</span>
00033 <span class="preprocessor">#include &lt;cstdlib&gt;</span>
00034 
00035 <span class="preprocessor">#include "<a class="code" href="CgiDefs_8h.html">cgicc/CgiDefs.h</a>"</span>
00036 <span class="preprocessor">#include "<a class="code" href="Cgicc_8h.html">cgicc/Cgicc.h</a>"</span>
00037 <span class="preprocessor">#include "<a class="code" href="HTTPHTMLHeader_8h.html">cgicc/HTTPHTMLHeader.h</a>"</span>
00038 <span class="preprocessor">#include "<a class="code" href="HTMLClasses_8h.html">cgicc/HTMLClasses.h</a>"</span>
00039 
00040 <span class="preprocessor">#if HAVE_UNAME</span>
00041 <span class="preprocessor"></span><span class="preprocessor">#  include &lt;sys/utsname.h&gt;</span>
00042 <span class="preprocessor">#endif</span>
00043 <span class="preprocessor"></span>
00044 <span class="preprocessor">#if HAVE_SYS_TIME_H</span>
00045 <span class="preprocessor"></span><span class="preprocessor">#  include &lt;sys/time.h&gt;</span>
00046 <span class="preprocessor">#endif</span>
00047 <span class="preprocessor"></span>
00048 <span class="comment">// To use logging, the variable gLogFile MUST be defined, and it _must_</span>
00049 <span class="comment">// be an ofstream</span>
00050 <span class="preprocessor">#if DEBUG</span>
00051 <span class="preprocessor"></span>  std::ofstream gLogFile( <span class="stringliteral">"/change_this_path/cgicc.log"</span>, std::ios::app );
00052 <span class="preprocessor">#endif</span>
00053 <span class="preprocessor"></span>
00054 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00055 <span class="keyword">using</span> <span class="keyword">namespace </span>cgicc;
00056 
00057 <span class="comment">// Main Street, USA</span>
00058 <span class="keywordtype">int</span>
00059 main(<span class="keywordtype">int</span> <span class="comment">/*argc*/</span>, 
00060      <span class="keywordtype">char</span> ** <span class="comment">/*argv*/</span>)
00061 {
00062   <span class="keywordflow">try</span> {
00063 <span class="preprocessor">#if HAVE_GETTIMEOFDAY</span>
00064 <span class="preprocessor"></span>    timeval start;
00065     gettimeofday(&amp;start, NULL);
00066 <span class="preprocessor">#endif</span>
00067 <span class="preprocessor"></span>
00068     <span class="comment">// Create a new Cgicc object containing all the CGI data</span>
00069     <a class="code" href="classcgicc_1_1Cgicc.html">Cgicc</a> cgi;
00070     
00071     <span class="comment">// Output the HTTP headers for an HTML document, and the HTML 4.0 DTD info</span>
00072     cout &lt;&lt; <a class="code" href="classcgicc_1_1HTTPHTMLHeader.html">HTTPHTMLHeader</a>() &lt;&lt; <a class="code" href="classcgicc_1_1HTMLDoctype.html">HTMLDoctype</a>(HTMLDoctype::eStrict) &lt;&lt; endl;
00073     cout &lt;&lt; html().set(<span class="stringliteral">"lang"</span>, <span class="stringliteral">"en"</span>).set(<span class="stringliteral">"dir"</span>, <span class="stringliteral">"ltr"</span>) &lt;&lt; endl;
00074 
00075     <span class="comment">// Set up the page's header and title.</span>
00076     <span class="comment">// I will put in lfs to ease reading of the produced HTML. </span>
00077     cout &lt;&lt; head() &lt;&lt; endl;
00078 
00079     <span class="comment">// Output the style sheet portion of the header</span>
00080     cout &lt;&lt; style() &lt;&lt; <a class="code" href="classcgicc_1_1comment.html">comment</a>() &lt;&lt; endl;
00081     cout &lt;&lt; <span class="stringliteral">"body { color: black; background-color: white; }"</span> &lt;&lt; endl;
00082     cout &lt;&lt; <span class="stringliteral">"hr.half { width: 60%; align: center; }"</span> &lt;&lt; endl;
00083     cout &lt;&lt; <span class="stringliteral">"span.red, strong.red { color: red; }"</span> &lt;&lt; endl;
00084     cout &lt;&lt; <span class="stringliteral">"div.smaller { font-size: small; }"</span> &lt;&lt; endl;
00085     cout &lt;&lt; <span class="stringliteral">"div.notice { border: solid thin; padding: 1em; margin: 1em 0; "</span>
00086          &lt;&lt; <span class="stringliteral">"background: #ddd; }"</span> &lt;&lt; endl;
00087     cout &lt;&lt; <span class="stringliteral">"span.blue { color: blue; }"</span> &lt;&lt; endl;
00088     cout &lt;&lt; <span class="stringliteral">"col.title { color: white; background-color: black; "</span>;
00089     cout &lt;&lt; <span class="stringliteral">"font-weight: bold; text-align: center; }"</span> &lt;&lt; endl;
00090     cout &lt;&lt; <span class="stringliteral">"col.data { background-color: #ddd; text-align: left; }"</span> &lt;&lt; endl;
00091     cout &lt;&lt; <span class="stringliteral">"td.data, TR.data { background-color: #ddd; text-align: left; }"</span>
00092          &lt;&lt; endl;
00093     cout &lt;&lt; <span class="stringliteral">"td.grayspecial { background-color: #ddd; text-align: left; }"</span>
00094          &lt;&lt; endl;
00095     cout &lt;&lt; <span class="stringliteral">"td.ltgray, tr.ltgray { background-color: #ddd; }"</span> &lt;&lt; endl;
00096     cout &lt;&lt; <span class="stringliteral">"td.dkgray, tr.dkgray { background-color: #bbb; }"</span> &lt;&lt; endl;
00097     cout &lt;&lt; <span class="stringliteral">"col.black, td.black, td.title, tr.title { color: white; "</span> 
00098          &lt;&lt; <span class="stringliteral">"background-color: black; font-weight: bold; text-align: center; }"</span>
00099          &lt;&lt; endl;
00100     cout &lt;&lt; <span class="stringliteral">"col.gray, td.gray { background-color: #ddd; text-align: center; }"</span>
00101          &lt;&lt; endl;
00102     cout &lt;&lt; <span class="stringliteral">"table.cgi { left-margin: auto; right-margin: auto; width: 90%; }"</span>
00103          &lt;&lt; endl;
00104 
00105     cout &lt;&lt; comment() &lt;&lt; style() &lt;&lt; endl;
00106 
00107     cout &lt;&lt; title() &lt;&lt; <span class="stringliteral">"GNU cgicc v"</span> &lt;&lt; cgi.<a class="code" href="classcgicc_1_1Cgicc.html#z3_2">getVersion</a>() 
00108          &lt;&lt; <span class="stringliteral">" File Upload Test Results"</span> &lt;&lt; title() &lt;&lt; endl;
00109 
00110     cout &lt;&lt; head() &lt;&lt; endl;
00111     
00112     <span class="comment">// Start the HTML body</span>
00113     cout &lt;&lt; body() &lt;&lt; endl;
00114 
00115     cout &lt;&lt; h1() &lt;&lt; <span class="stringliteral">"GNU cgi"</span> &lt;&lt; span(<span class="stringliteral">"cc"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"red"</span>)
00116          &lt;&lt; <span class="stringliteral">" v"</span>&lt;&lt; cgi.<a class="code" href="classcgicc_1_1Cgicc.html#z3_2">getVersion</a>() &lt;&lt; <span class="stringliteral">" File Upload Test Results"</span> 
00117          &lt;&lt; h1() &lt;&lt; endl;
00118     
00119     <span class="comment">// Get a pointer to the environment</span>
00120     <span class="keyword">const</span> <a class="code" href="classcgicc_1_1CgiEnvironment.html">CgiEnvironment</a>&amp; env = cgi.<a class="code" href="classcgicc_1_1Cgicc.html#z9_0">getEnvironment</a>();
00121     
00122     <span class="comment">// Generic thank you message</span>
00123     cout &lt;&lt; comment() &lt;&lt; <span class="stringliteral">"This page generated by cgicc for "</span>
00124          &lt;&lt; env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z21_0">getRemoteHost</a>() &lt;&lt; comment() &lt;&lt; endl;
00125     cout &lt;&lt; h4() &lt;&lt; <span class="stringliteral">"Thanks for using cgi"</span> &lt;&lt; span(<span class="stringliteral">"cc"</span>).set(<span class="stringliteral">"class"</span>, <span class="stringliteral">"red"</span>) 
00126          &lt;&lt; <span class="stringliteral">", "</span> &lt;&lt; env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z21_0">getRemoteHost</a>() 
00127          &lt;&lt; <span class="charliteral">'('</span> &lt;&lt; env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z21_1">getRemoteAddr</a>() &lt;&lt; <span class="stringliteral">")!"</span> &lt;&lt; h4() &lt;&lt; endl;  
00128     
00129     <span class="comment">// Show the uploaded file</span>
00130     cout &lt;&lt; h2(<span class="stringliteral">"File Uploaded via FormFile"</span>) &lt;&lt; endl;
00131   
00132     <a class="code" href="namespacecgicc.html#a3">const_file_iterator</a> file;
00133     file = cgi.<a class="code" href="classcgicc_1_1Cgicc.html#z7_0">getFile</a>(<span class="stringliteral">"userfile"</span>);
00134                                 
00135     <span class="keywordflow">if</span>(file != cgi.<a class="code" href="classcgicc_1_1Cgicc.html#z7_2">getFiles</a>().end()) {
00136       cout &lt;&lt; cgicc::div().set(<span class="stringliteral">"align"</span>,<span class="stringliteral">"center"</span>) &lt;&lt; endl;
00137     
00138       cout &lt;&lt; table().set(<span class="stringliteral">"border"</span>,<span class="stringliteral">"0"</span>).set(<span class="stringliteral">"rules"</span>,<span class="stringliteral">"none"</span>).set(<span class="stringliteral">"frame"</span>,<span class="stringliteral">"void"</span>)
00139         .set(<span class="stringliteral">"cellspacing"</span>,<span class="stringliteral">"2"</span>).set(<span class="stringliteral">"cellpadding"</span>,<span class="stringliteral">"2"</span>)
00140         .set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"cgi"</span>) &lt;&lt; endl;
00141       cout &lt;&lt; colgroup().set(<span class="stringliteral">"span"</span>,<span class="stringliteral">"2"</span>) &lt;&lt; endl;
00142       cout &lt;&lt; col().set(<span class="stringliteral">"align"</span>,<span class="stringliteral">"center"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>).set(<span class="stringliteral">"span"</span>,<span class="stringliteral">"1"</span>) 
00143            &lt;&lt; endl;
00144       cout &lt;&lt; col().set(<span class="stringliteral">"align"</span>,<span class="stringliteral">"left"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>).set(<span class="stringliteral">"span"</span>,<span class="stringliteral">"1"</span>) 
00145            &lt;&lt; endl;
00146       cout &lt;&lt; colgroup() &lt;&lt; endl;
00147       
00148       cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"Name"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>)
00149            &lt;&lt; td((*file).getName()).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; tr() &lt;&lt; endl;
00150       
00151       cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"Data Type"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>)
00152            &lt;&lt; td((*file).getDataType()).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; tr() &lt;&lt; endl;
00153       
00154       cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"Filename"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>) 
00155            &lt;&lt; td((*file).getFilename()).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; tr() &lt;&lt; endl;
00156       cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"Data Length"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>) 
00157            &lt;&lt; td().set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; (*file).getDataLength() 
00158            &lt;&lt; td() &lt;&lt; tr() &lt;&lt; endl;
00159       
00160       cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"File Data"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>)
00161            &lt;&lt; td().set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; pre();
00162       (*file).writeToStream(cout);
00163 
00164       <span class="comment">/*</span>
00165 <span class="comment">        To write the contents of the file to a file "foo" on disk:</span>
00166 <span class="comment"></span>
00167 <span class="comment">        ofstream foo("foo");</span>
00168 <span class="comment">        (*file).writeToStream(foo);</span>
00169 <span class="comment">       */</span>
00170       
00171       cout &lt;&lt; pre() &lt;&lt; td() &lt;&lt; tr() &lt;&lt; endl;
00172       
00173       cout &lt;&lt; table() &lt;&lt; cgicc::div() &lt;&lt; endl;
00174     }
00175     <span class="keywordflow">else</span> {
00176       cout &lt;&lt; p() &lt;&lt; cgicc::div().set(<span class="stringliteral">"class"</span>, <span class="stringliteral">"notice"</span>) &lt;&lt; endl;
00177       cout &lt;&lt; <span class="stringliteral">"No file was uploaded."</span> &lt;&lt; endl &lt;&lt; cgicc::div() &lt;&lt; p() &lt;&lt; endl;
00178     }
00179 
00180     <span class="comment">// Now print out a footer with some fun info</span>
00181     cout &lt;&lt; p() &lt;&lt; cgicc::div().set(<span class="stringliteral">"align"</span>,<span class="stringliteral">"center"</span>);
00182     cout &lt;&lt; a(<span class="stringliteral">"Back to form"</span>).set(<span class="stringliteral">"href"</span>, cgi.<a class="code" href="classcgicc_1_1Cgicc.html#z9_0">getEnvironment</a>().<a class="code" href="classcgicc_1_1CgiEnvironment.html#z19_0">getReferrer</a>()) 
00183          &lt;&lt; endl;
00184     cout &lt;&lt; cgicc::div() &lt;&lt; br() &lt;&lt; hr(<a class="code" href="namespacecgicc.html#a18">set</a>(<span class="stringliteral">"class"</span>,<span class="stringliteral">"half"</span>)) &lt;&lt; endl;
00185     
00186     <span class="comment">// Information on cgicc</span>
00187     cout &lt;&lt; cgicc::div().set(<span class="stringliteral">"align"</span>,<span class="stringliteral">"center"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"smaller"</span>) &lt;&lt; endl;
00188     cout &lt;&lt; <span class="stringliteral">"GNU cgi"</span> &lt;&lt; span(<span class="stringliteral">"cc"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"red"</span>) &lt;&lt; <span class="stringliteral">" v"</span>;
00189     cout &lt;&lt; cgi.<a class="code" href="classcgicc_1_1Cgicc.html#z3_2">getVersion</a>() &lt;&lt; br() &lt;&lt; endl;
00190     cout &lt;&lt; <span class="stringliteral">"Compiled at "</span> &lt;&lt; cgi.<a class="code" href="classcgicc_1_1Cgicc.html#z3_1">getCompileTime</a>();
00191     cout &lt;&lt; <span class="stringliteral">" on "</span> &lt;&lt; cgi.<a class="code" href="classcgicc_1_1Cgicc.html#z3_0">getCompileDate</a>() &lt;&lt; br() &lt;&lt; endl;
00192 
00193     cout &lt;&lt; <span class="stringliteral">"Configured for "</span> &lt;&lt; cgi.<a class="code" href="classcgicc_1_1Cgicc.html#z3_3">getHost</a>();  
00194 <span class="preprocessor">#if HAVE_UNAME</span>
00195 <span class="preprocessor"></span>    <span class="keyword">struct </span>utsname info;
00196     <span class="keywordflow">if</span>(uname(&amp;info) != -1) {
00197       cout &lt;&lt; <span class="stringliteral">". Running on "</span> &lt;&lt; info.sysname;
00198       cout &lt;&lt; <span class="charliteral">' '</span> &lt;&lt; info.release &lt;&lt; <span class="stringliteral">" ("</span>;
00199       cout &lt;&lt; info.nodename &lt;&lt; <span class="stringliteral">")."</span> &lt;&lt; endl;
00200     }
00201 <span class="preprocessor">#else</span>
00202 <span class="preprocessor"></span>    cout &lt;&lt; <span class="stringliteral">"."</span> &lt;&lt; endl;
00203 <span class="preprocessor">#endif</span>
00204 <span class="preprocessor"></span>
00205 <span class="preprocessor">#if HAVE_GETTIMEOFDAY</span>
00206 <span class="preprocessor"></span>    <span class="comment">// Information on this query</span>
00207     timeval end;
00208     gettimeofday(&amp;end, NULL);
00209     <span class="keywordtype">long</span> us = ((end.tv_sec - start.tv_sec) * 1000000)
00210       + (end.tv_usec - start.tv_usec);
00211 
00212     cout &lt;&lt; br() &lt;&lt; <span class="stringliteral">"Total time for request = "</span> &lt;&lt; us &lt;&lt; <span class="stringliteral">" us"</span>;
00213     cout &lt;&lt; <span class="stringliteral">" ("</span> &lt;&lt; (<span class="keywordtype">double</span>) (us/1000000.0) &lt;&lt; <span class="stringliteral">" s)"</span>;
00214 <span class="preprocessor">#endif</span>
00215 <span class="preprocessor"></span>
00216     <span class="comment">// End of document</span>
00217     cout &lt;&lt; cgicc::div() &lt;&lt; endl;
00218     cout &lt;&lt; body() &lt;&lt; html() &lt;&lt; endl;
00219 
00220     <span class="comment">// No chance for failure in this example</span>
00221     <span class="keywordflow">return</span> EXIT_SUCCESS;
00222   }
00223 
00224   <span class="comment">// Did any errors occur?</span>
00225   <span class="keywordflow">catch</span>(<span class="keyword">const</span> std::exception&amp; e) {
00226 
00227     <span class="comment">// This is a dummy exception handler, as it doesn't really do</span>
00228     <span class="comment">// anything except print out information.</span>
00229 
00230     <span class="comment">// Reset all the HTML elements that might have been used to </span>
00231     <span class="comment">// their initial state so we get valid output</span>
00232     html::reset();      head::reset();          body::reset();
00233     title::reset();     h1::reset();            h4::reset();
00234     <a class="code" href="classcgicc_1_1HTMLBooleanElement.html#z65_2">comment::reset</a>();   td::reset();            tr::reset(); 
00235     table::reset();     cgicc::div::reset();    p::reset(); 
00236     a::reset();         h2::reset();            colgroup::reset();
00237 
00238     <span class="comment">// Output the HTTP headers for an HTML document, and the HTML 4.0 DTD info</span>
00239     cout &lt;&lt; HTTPHTMLHeader() &lt;&lt; HTMLDoctype(HTMLDoctype::eStrict) &lt;&lt; endl;
00240     cout &lt;&lt; html().set(<span class="stringliteral">"lang"</span>,<span class="stringliteral">"en"</span>).set(<span class="stringliteral">"dir"</span>,<span class="stringliteral">"ltr"</span>) &lt;&lt; endl;
00241 
00242     <span class="comment">// Set up the page's header and title.</span>
00243     <span class="comment">// I will put in lfs to ease reading of the produced HTML. </span>
00244     cout &lt;&lt; head() &lt;&lt; endl;
00245 
00246     <span class="comment">// Output the style sheet portion of the header</span>
00247     cout &lt;&lt; style() &lt;&lt; comment() &lt;&lt; endl;
00248     cout &lt;&lt; <span class="stringliteral">"body { color: black; background-color: white; }"</span> &lt;&lt; endl;
00249     cout &lt;&lt; <span class="stringliteral">"hr.half { width: 60%; align: center; }"</span> &lt;&lt; endl;
00250     cout &lt;&lt; <span class="stringliteral">"span.red, strong.red { color: red; }"</span> &lt;&lt; endl;
00251     cout &lt;&lt; <span class="stringliteral">"div.notice { border: solid thin; padding: 1em; margin: 1em 0; "</span>
00252          &lt;&lt; <span class="stringliteral">"background: #ddd; }"</span> &lt;&lt; endl;
00253 
00254     cout &lt;&lt; comment() &lt;&lt; style() &lt;&lt; endl;
00255 
00256     cout &lt;&lt; title(<span class="stringliteral">"GNU cgicc exception"</span>) &lt;&lt; endl;
00257     cout &lt;&lt; head() &lt;&lt; endl;
00258     
00259     cout &lt;&lt; body() &lt;&lt; endl;
00260     
00261     cout &lt;&lt; h1() &lt;&lt; <span class="stringliteral">"GNU cgi"</span> &lt;&lt; span(<span class="stringliteral">"cc"</span>, <a class="code" href="namespacecgicc.html#a18">set</a>(<span class="stringliteral">"class"</span>,<span class="stringliteral">"red"</span>))
00262          &lt;&lt; <span class="stringliteral">" caught an exception"</span> &lt;&lt; h1() &lt;&lt; endl; 
00263   
00264     cout &lt;&lt; cgicc::div().set(<span class="stringliteral">"align"</span>,<span class="stringliteral">"center"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"notice"</span>) &lt;&lt; endl;
00265 
00266     cout &lt;&lt; h2(e.what()) &lt;&lt; endl;
00267 
00268     <span class="comment">// End of document</span>
00269     cout &lt;&lt; cgicc::div() &lt;&lt; endl;
00270     cout &lt;&lt; hr().set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"half"</span>) &lt;&lt; endl;
00271     cout &lt;&lt; body() &lt;&lt; html() &lt;&lt; endl;
00272     
00273     <span class="keywordflow">return</span> EXIT_SUCCESS;
00274   }
00275 }
</pre></div><!-- $Id: footer.html,v 1.7 2004/06/12 01:58:25 sbooth Exp $ -->

<hr>

<address><small>
<a href="http://www.cgicc.org">GNU cgicc</a> - A C++ class library for
writing CGI applications<br />
Copyright &copy; 1996 - 2004 
<a href="mailto:sboothATgnuDOTorg">Stephen F. Booth</a><br />
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.1 or
any later version published by the Free Software Foundation; with no
Invariant Sections, with no Front Cover Texts, and with no Back-Cover
Texts.<br />
Documentation generated Sat Jun 19 00:36:23 2004 for cgicc by
<a HREF="http://www.doxygen.org/index.html">doxygen</a> 1.3.6
</small></address>

</body>

</html>

