<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
   "http://www.w3.org/TR/REC-html40/loose.dtd">

<html lang="en" dir="LTR">

<head>
  <!-- $Id: header.html,v 1.5 2004/06/12 01:58:25 sbooth Exp $ -->
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <title>test.cpp Source File</title>
  <link rev="made" href="mailto:bug-cgicc@gnu.org" />
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="cgicc-doc.css" rel="stylesheet" type="text/css" />
</head>

<body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>test.cpp</h1><a href="test_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment"> *  $Id: test.cpp,v 1.21 2004/06/12 14:48:41 sbooth Exp $</span>
00003 <span class="comment"> *</span>
00004 <span class="comment"> *  Copyright (C) 1996 - 2004 Stephen F. Booth</span>
00005 <span class="comment"> *</span>
00006 <span class="comment"> *  This program is free software; you can redistribute it and/or modify</span>
00007 <span class="comment"> *  it under the terms of the GNU General Public License as published by</span>
00008 <span class="comment"> *  the Free Software Foundation; either version 2 of the License, or</span>
00009 <span class="comment"> *  (at your option) any later version.</span>
00010 <span class="comment"> *</span>
00011 <span class="comment"> *  This program is distributed in the hope that it will be useful,</span>
00012 <span class="comment"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00013 <span class="comment"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00014 <span class="comment"> *  GNU General Public License for more details.</span>
00015 <span class="comment"> *</span>
00016 <span class="comment"> *  You should have received a copy of the GNU General Public License</span>
00017 <span class="comment"> *  along with this program; if not, write to the Free Software</span>
00018 <span class="comment"> *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
00019 <span class="comment"> */</span>
00020 
00027 <span class="preprocessor">#include &lt;new&gt;</span>
00028 <span class="preprocessor">#include &lt;string&gt;</span>
00029 <span class="preprocessor">#include &lt;vector&gt;</span>
00030 <span class="preprocessor">#include &lt;stdexcept&gt;</span>
00031 <span class="preprocessor">#include &lt;iostream&gt;</span>
00032 <span class="preprocessor">#include &lt;cstdlib&gt;</span>
00033 
00034 <span class="preprocessor">#include "<a class="code" href="CgiDefs_8h.html">cgicc/CgiDefs.h</a>"</span>
00035 <span class="preprocessor">#include "<a class="code" href="Cgicc_8h.html">cgicc/Cgicc.h</a>"</span>
00036 <span class="preprocessor">#include "<a class="code" href="HTTPHTMLHeader_8h.html">cgicc/HTTPHTMLHeader.h</a>"</span>
00037 <span class="preprocessor">#include "<a class="code" href="HTMLClasses_8h.html">cgicc/HTMLClasses.h</a>"</span>
00038 
00039 <span class="preprocessor">#if HAVE_UNAME</span>
00040 <span class="preprocessor"></span><span class="preprocessor">#  include &lt;sys/utsname.h&gt;</span>
00041 <span class="preprocessor">#endif</span>
00042 <span class="preprocessor"></span>
00043 <span class="preprocessor">#if HAVE_SYS_TIME_H</span>
00044 <span class="preprocessor"></span><span class="preprocessor">#  include &lt;sys/time.h&gt;</span>
00045 <span class="preprocessor">#endif</span>
00046 <span class="preprocessor"></span>
00047 <span class="comment">// To use logging, the variable gLogFile MUST be defined, and it _must_</span>
00048 <span class="comment">// be an ofstream</span>
00049 <span class="preprocessor">#if DEBUG</span>
00050 <span class="preprocessor"></span>  std::ofstream gLogFile( <span class="stringliteral">"/change_this_path/cgicc.log"</span>, std::ios::app );
00051 <span class="preprocessor">#endif</span>
00052 <span class="preprocessor"></span>
00053 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00054 <span class="keyword">using</span> <span class="keyword">namespace </span>cgicc;
00055 
00056 <span class="comment">// Function prototypes</span>
00057 <span class="keywordtype">void</span> dumpEnvironment(<span class="keyword">const</span> <a class="code" href="classcgicc_1_1CgiEnvironment.html">CgiEnvironment</a>&amp; env);
00058 <span class="keywordtype">void</span> dumpList(<span class="keyword">const</span> <a class="code" href="classcgicc_1_1Cgicc.html">Cgicc</a>&amp; formData);
00059 <span class="keywordtype">void</span> showForm(<span class="keyword">const</span> <a class="code" href="classcgicc_1_1Cgicc.html">Cgicc</a>&amp; formData);
00060 
00061 <span class="comment">// Main Street, USA</span>
00062 <span class="keywordtype">int</span>
00063 main(<span class="keywordtype">int</span> <span class="comment">/*argc*/</span>, 
00064      <span class="keywordtype">char</span> ** <span class="comment">/*argv*/</span>)
00065 {
00066   <span class="keywordflow">try</span> {
00067 <span class="preprocessor">#if HAVE_GETTIMEOFDAY</span>
00068 <span class="preprocessor"></span>    timeval start;
00069     gettimeofday(&amp;start, NULL);
00070 <span class="preprocessor">#endif</span>
00071 <span class="preprocessor"></span>
00072     <span class="comment">// Create a new Cgicc object containing all the CGI data</span>
00073     <a class="code" href="classcgicc_1_1Cgicc.html">Cgicc</a> cgi;
00074     
00075     <span class="comment">// If the user wants to throw an exception, go ahead and do it</span>
00076     <span class="keywordflow">if</span>(cgi.<a class="code" href="classcgicc_1_1Cgicc.html#z5_0">queryCheckbox</a>(<span class="stringliteral">"throw"</span>) &amp;&amp; ! cgi.<a class="code" href="classcgicc_1_1Cgicc.html#z5_0">queryCheckbox</a>(<span class="stringliteral">"restore"</span>))
00077       <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">"User-requested Exception thrown in main()"</span>);
00078     
00079     <span class="comment">// Output the HTTP headers for an HTML document, and the HTML 4.0 DTD info</span>
00080     cout &lt;&lt; <a class="code" href="classcgicc_1_1HTTPHTMLHeader.html">HTTPHTMLHeader</a>() &lt;&lt; <a class="code" href="classcgicc_1_1HTMLDoctype.html">HTMLDoctype</a>(HTMLDoctype::eStrict) &lt;&lt; endl;
00081     cout &lt;&lt; html().set(<span class="stringliteral">"lang"</span>, <span class="stringliteral">"en"</span>).set(<span class="stringliteral">"dir"</span>, <span class="stringliteral">"ltr"</span>) &lt;&lt; endl;
00082 
00083     <span class="comment">// Set up the page's header and title.</span>
00084     <span class="comment">// I will put in lfs to ease reading of the produced HTML. </span>
00085     cout &lt;&lt; head() &lt;&lt; endl;
00086 
00087     <span class="comment">// Output the style sheet portion of the header</span>
00088     cout &lt;&lt; style() &lt;&lt; <a class="code" href="classcgicc_1_1comment.html">comment</a>() &lt;&lt; endl;
00089     cout &lt;&lt; <span class="stringliteral">"body { color: black; background-color: white; }"</span> &lt;&lt; endl;
00090     cout &lt;&lt; <span class="stringliteral">"hr.half { width: 60%; align: center; }"</span> &lt;&lt; endl;
00091     cout &lt;&lt; <span class="stringliteral">"span.red, strong.red { color: red; }"</span> &lt;&lt; endl;
00092     cout &lt;&lt; <span class="stringliteral">"div.smaller { font-size: small; }"</span> &lt;&lt; endl;
00093     cout &lt;&lt; <span class="stringliteral">"div.notice { border: solid thin; padding: 1em; margin: 1em 0; "</span>
00094          &lt;&lt; <span class="stringliteral">"background: #ddd; }"</span> &lt;&lt; endl;
00095     cout &lt;&lt; <span class="stringliteral">"span.blue { color: blue; }"</span> &lt;&lt; endl;
00096     cout &lt;&lt; <span class="stringliteral">"col.title { color: white; background-color: black; "</span>;
00097     cout &lt;&lt; <span class="stringliteral">"font-weight: bold; text-align: center; }"</span> &lt;&lt; endl;
00098     cout &lt;&lt; <span class="stringliteral">"col.data { background-color: #DDD; text-align: left; }"</span> &lt;&lt; endl;
00099     cout &lt;&lt; <span class="stringliteral">"td.data, tr.data { background-color: #ddd; text-align: left; }"</span>
00100          &lt;&lt; endl;
00101     cout &lt;&lt; <span class="stringliteral">"td.grayspecial { background-color: #ddd; text-align: left; }"</span>
00102          &lt;&lt; endl;
00103     cout &lt;&lt; <span class="stringliteral">"td.ltgray, tr.ltgray { background-color: #ddd; }"</span> &lt;&lt; endl;
00104     cout &lt;&lt; <span class="stringliteral">"td.dkgray, tr.dkgray { background-color: #bbb; }"</span> &lt;&lt; endl;
00105     cout &lt;&lt; <span class="stringliteral">"col.black, td.black, td.title, tr.title { color: white; "</span> 
00106          &lt;&lt; <span class="stringliteral">"background-color: black; font-weight: bold; text-align: center; }"</span>
00107          &lt;&lt; endl;
00108     cout &lt;&lt; <span class="stringliteral">"col.gray, td.gray { background-color: #ddd; text-align: center; }"</span>
00109          &lt;&lt; endl;
00110     cout &lt;&lt; <span class="stringliteral">"table.cgi { left-margin: auto; right-margin: auto; width: 90%; }"</span>
00111          &lt;&lt; endl;
00112 
00113     cout &lt;&lt; comment() &lt;&lt; style() &lt;&lt; endl;
00114 
00115     cout &lt;&lt; title() &lt;&lt; <span class="stringliteral">"GNU cgicc v"</span> &lt;&lt; cgi.<a class="code" href="classcgicc_1_1Cgicc.html#z3_2">getVersion</a>() &lt;&lt; <span class="stringliteral">" Test Results"</span> 
00116          &lt;&lt; title() &lt;&lt; endl;
00117 
00118     cout &lt;&lt; head() &lt;&lt; endl;
00119     
00120     <span class="comment">// Start the HTML body</span>
00121     cout &lt;&lt; body() &lt;&lt; endl;
00122 
00123     cout &lt;&lt; h1() &lt;&lt; <span class="stringliteral">"GNU cgi"</span> &lt;&lt; span(<span class="stringliteral">"cc"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"red"</span>)
00124          &lt;&lt; <span class="stringliteral">" v"</span>&lt;&lt; cgi.<a class="code" href="classcgicc_1_1Cgicc.html#z3_2">getVersion</a>() &lt;&lt; <span class="stringliteral">" Test Results"</span> &lt;&lt; h1() &lt;&lt; endl;
00125     
00126     <span class="comment">// Get a pointer to the environment</span>
00127     <span class="keyword">const</span> <a class="code" href="classcgicc_1_1CgiEnvironment.html">CgiEnvironment</a>&amp; env = cgi.<a class="code" href="classcgicc_1_1Cgicc.html#z9_0">getEnvironment</a>();
00128     
00129     <span class="comment">// Generic thank you message</span>
00130     cout &lt;&lt; comment() &lt;&lt; <span class="stringliteral">"This page generated by cgicc for "</span>
00131          &lt;&lt; env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z21_0">getRemoteHost</a>() &lt;&lt; comment() &lt;&lt; endl;
00132     cout &lt;&lt; h4() &lt;&lt; <span class="stringliteral">"Thanks for using cgi"</span> &lt;&lt; span(<span class="stringliteral">"cc"</span>).set(<span class="stringliteral">"class"</span>, <span class="stringliteral">"red"</span>) 
00133          &lt;&lt; <span class="stringliteral">", "</span> &lt;&lt; env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z21_0">getRemoteHost</a>() 
00134          &lt;&lt; <span class="charliteral">'('</span> &lt;&lt; env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z21_1">getRemoteAddr</a>() &lt;&lt; <span class="stringliteral">")!"</span> &lt;&lt; h4() &lt;&lt; endl;  
00135     
00136     <span class="comment">// If the user wants to save the submission, do it</span>
00137     <span class="keywordflow">if</span>(cgi.<a class="code" href="classcgicc_1_1Cgicc.html#z5_0">queryCheckbox</a>(<span class="stringliteral">"save"</span>)) {
00138       <span class="comment">// Make sure the save file is readable and writable by the CGI process</span>
00139       cgi.<a class="code" href="classcgicc_1_1Cgicc.html#z11_0">save</a>(<span class="stringliteral">"save"</span>);
00140       cout &lt;&lt; p(h2(<span class="stringliteral">"Data Saved"</span>)) &lt;&lt; endl;
00141       
00142       cout &lt;&lt; cgicc::div().set(<span class="stringliteral">"class"</span>, <span class="stringliteral">"notice"</span>) &lt;&lt; endl;
00143       cout &lt;&lt; <span class="stringliteral">"Your data has been saved, and may be restored (by anyone) "</span>
00144            &lt;&lt; <span class="stringliteral">"via the same form."</span> &lt;&lt; endl &lt;&lt; cgicc::div() &lt;&lt; p() &lt;&lt; endl;
00145     }
00146 
00147     <span class="comment">// If the user wants to restore from the last submission, do it</span>
00148     <span class="keywordflow">if</span>(cgi.<a class="code" href="classcgicc_1_1Cgicc.html#z5_0">queryCheckbox</a>(<span class="stringliteral">"restore"</span>)) {
00149       cgi.<a class="code" href="classcgicc_1_1Cgicc.html#z11_1">restore</a>(<span class="stringliteral">"save"</span>);
00150       cout &lt;&lt; p(h2(<span class="stringliteral">"Data Restored"</span>)) &lt;&lt; endl;
00151       
00152       cout &lt;&lt; cgicc::div().set(<span class="stringliteral">"class"</span>, <span class="stringliteral">"notice"</span>) &lt;&lt; endl;
00153       cout &lt;&lt; <span class="stringliteral">"The data displayed has been restored from a file on disk."</span>
00154            &lt;&lt; endl &lt;&lt; cgicc::div() &lt;&lt; p() &lt;&lt; endl;
00155     }
00156     
00157     <span class="comment">// If the user requested a dump of the environment,</span>
00158     <span class="comment">// create a simple table showing the values of the </span>
00159     <span class="comment">// environment variables</span>
00160     <span class="keywordflow">if</span>(cgi.<a class="code" href="classcgicc_1_1Cgicc.html#z5_0">queryCheckbox</a>(<span class="stringliteral">"showEnv"</span>))
00161       dumpEnvironment(env);
00162     
00163     <span class="comment">// If the user requested, print out the raw form data from </span>
00164     <span class="comment">// the vector of FormEntries.  This will contain every </span>
00165     <span class="comment">// element in the list.</span>
00166     <span class="comment">// This is one of two ways to get at form data, the other</span>
00167     <span class="comment">// being the use of Cgicc's getElement() methods.  </span>
00168     <span class="keywordflow">if</span>(cgi.<a class="code" href="classcgicc_1_1Cgicc.html#z5_0">queryCheckbox</a>(<span class="stringliteral">"showFE"</span>))
00169       dumpList(cgi);
00170     
00171     <span class="comment">// If the user requested data via Cgicc's getElement() methods, do it.</span>
00172     <span class="comment">// This is different than the use of the list of FormEntries </span>
00173     <span class="comment">// because it requires prior knowledge of the name of form elements.</span>
00174     <span class="comment">// Usually they will be known, but you never know.</span>
00175     <span class="keywordflow">if</span>(cgi.<a class="code" href="classcgicc_1_1Cgicc.html#z5_0">queryCheckbox</a>(<span class="stringliteral">"showForm"</span>))
00176       showForm(cgi);
00177 
00178     <span class="comment">// Now print out a footer with some fun info</span>
00179     cout &lt;&lt; p() &lt;&lt; cgicc::div().set(<span class="stringliteral">"align"</span>,<span class="stringliteral">"center"</span>);
00180     cout &lt;&lt; a(<span class="stringliteral">"Back to form"</span>).set(<span class="stringliteral">"href"</span>, cgi.<a class="code" href="classcgicc_1_1Cgicc.html#z9_0">getEnvironment</a>().<a class="code" href="classcgicc_1_1CgiEnvironment.html#z19_0">getReferrer</a>()) 
00181          &lt;&lt; endl;
00182     cout &lt;&lt; cgicc::div() &lt;&lt; br() &lt;&lt; hr(<a class="code" href="namespacecgicc.html#a18">set</a>(<span class="stringliteral">"class"</span>,<span class="stringliteral">"half"</span>)) &lt;&lt; endl;
00183     
00184     <span class="comment">// Information on cgicc</span>
00185     cout &lt;&lt; cgicc::div().set(<span class="stringliteral">"align"</span>,<span class="stringliteral">"center"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"smaller"</span>) &lt;&lt; endl;
00186     cout &lt;&lt; <span class="stringliteral">"GNU cgi"</span> &lt;&lt; span(<span class="stringliteral">"cc"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"red"</span>) &lt;&lt; <span class="stringliteral">" v"</span>;
00187     cout &lt;&lt; cgi.<a class="code" href="classcgicc_1_1Cgicc.html#z3_2">getVersion</a>() &lt;&lt; br() &lt;&lt; endl;
00188     cout &lt;&lt; <span class="stringliteral">"Compiled at "</span> &lt;&lt; cgi.<a class="code" href="classcgicc_1_1Cgicc.html#z3_1">getCompileTime</a>();
00189     cout &lt;&lt; <span class="stringliteral">" on "</span> &lt;&lt; cgi.<a class="code" href="classcgicc_1_1Cgicc.html#z3_0">getCompileDate</a>() &lt;&lt; br() &lt;&lt; endl;
00190 
00191     cout &lt;&lt; <span class="stringliteral">"Configured for "</span> &lt;&lt; cgi.<a class="code" href="classcgicc_1_1Cgicc.html#z3_3">getHost</a>();  
00192 <span class="preprocessor">#if HAVE_UNAME</span>
00193 <span class="preprocessor"></span>    <span class="keyword">struct </span>utsname info;
00194     <span class="keywordflow">if</span>(uname(&amp;info) != -1) {
00195       cout &lt;&lt; <span class="stringliteral">". Running on "</span> &lt;&lt; info.sysname;
00196       cout &lt;&lt; <span class="charliteral">' '</span> &lt;&lt; info.release &lt;&lt; <span class="stringliteral">" ("</span>;
00197       cout &lt;&lt; info.nodename &lt;&lt; <span class="stringliteral">")."</span> &lt;&lt; endl;
00198     }
00199 <span class="preprocessor">#else</span>
00200 <span class="preprocessor"></span>    cout &lt;&lt; <span class="stringliteral">"."</span> &lt;&lt; endl;
00201 <span class="preprocessor">#endif</span>
00202 <span class="preprocessor"></span>
00203 <span class="preprocessor">#if HAVE_GETTIMEOFDAY</span>
00204 <span class="preprocessor"></span>    <span class="comment">// Information on this query</span>
00205     timeval end;
00206     gettimeofday(&amp;end, NULL);
00207     <span class="keywordtype">long</span> us = ((end.tv_sec - start.tv_sec) * 1000000)
00208       + (end.tv_usec - start.tv_usec);
00209 
00210     cout &lt;&lt; br() &lt;&lt; <span class="stringliteral">"Total time for request = "</span> &lt;&lt; us &lt;&lt; <span class="stringliteral">" us"</span>;
00211     cout &lt;&lt; <span class="stringliteral">" ("</span> &lt;&lt; (<span class="keywordtype">double</span>) (us/1000000.0) &lt;&lt; <span class="stringliteral">" s)"</span>;
00212 <span class="preprocessor">#endif</span>
00213 <span class="preprocessor"></span>
00214     <span class="comment">// End of document</span>
00215     cout &lt;&lt; cgicc::div() &lt;&lt; endl;
00216     cout &lt;&lt; body() &lt;&lt; html() &lt;&lt; endl;
00217 
00218     <span class="comment">// No chance for failure in this example</span>
00219     <span class="keywordflow">return</span> EXIT_SUCCESS;
00220   }
00221 
00222   <span class="comment">// Did any errors occur?</span>
00223   <span class="keywordflow">catch</span>(<span class="keyword">const</span> std::exception&amp; e) {
00224 
00225     <span class="comment">// This is a dummy exception handler, as it doesn't really do</span>
00226     <span class="comment">// anything except print out information.</span>
00227 
00228     <span class="comment">// Reset all the HTML elements that might have been used to </span>
00229     <span class="comment">// their initial state so we get valid output</span>
00230     html::reset();      head::reset();          body::reset();
00231     title::reset();     h1::reset();            h4::reset();
00232     <a class="code" href="classcgicc_1_1HTMLBooleanElement.html#z65_2">comment::reset</a>();   td::reset();            tr::reset(); 
00233     table::reset();     cgicc::div::reset();    p::reset(); 
00234     a::reset();         h2::reset();            colgroup::reset();
00235 
00236     <span class="comment">// Output the HTTP headers for an HTML document, and the HTML 4.0 DTD info</span>
00237     cout &lt;&lt; HTTPHTMLHeader() &lt;&lt; HTMLDoctype(HTMLDoctype::eStrict) &lt;&lt; endl;
00238     cout &lt;&lt; html().set(<span class="stringliteral">"lang"</span>,<span class="stringliteral">"en"</span>).set(<span class="stringliteral">"dir"</span>,<span class="stringliteral">"ltr"</span>) &lt;&lt; endl;
00239 
00240     <span class="comment">// Set up the page's header and title.</span>
00241     <span class="comment">// I will put in lfs to ease reading of the produced HTML. </span>
00242     cout &lt;&lt; head() &lt;&lt; endl;
00243 
00244     <span class="comment">// Output the style sheet portion of the header</span>
00245     cout &lt;&lt; style() &lt;&lt; comment() &lt;&lt; endl;
00246     cout &lt;&lt; <span class="stringliteral">"body { color: black; background-color: white; }"</span> &lt;&lt; endl;
00247     cout &lt;&lt; <span class="stringliteral">"hr.half { width: 60%; align: center; }"</span> &lt;&lt; endl;
00248     cout &lt;&lt; <span class="stringliteral">"span.red, STRONG.red { color: red; }"</span> &lt;&lt; endl;
00249     cout &lt;&lt; <span class="stringliteral">"div.notice { border: solid thin; padding: 1em; margin: 1em 0; "</span>
00250          &lt;&lt; <span class="stringliteral">"background: #ddd; }"</span> &lt;&lt; endl;
00251 
00252     cout &lt;&lt; comment() &lt;&lt; style() &lt;&lt; endl;
00253 
00254     cout &lt;&lt; title(<span class="stringliteral">"GNU cgicc exception"</span>) &lt;&lt; endl;
00255     cout &lt;&lt; head() &lt;&lt; endl;
00256     
00257     cout &lt;&lt; body() &lt;&lt; endl;
00258     
00259     cout &lt;&lt; h1() &lt;&lt; <span class="stringliteral">"GNU cgi"</span> &lt;&lt; span(<span class="stringliteral">"cc"</span>, <a class="code" href="namespacecgicc.html#a18">set</a>(<span class="stringliteral">"class"</span>,<span class="stringliteral">"red"</span>))
00260          &lt;&lt; <span class="stringliteral">" caught an exception"</span> &lt;&lt; h1() &lt;&lt; endl; 
00261   
00262     cout &lt;&lt; cgicc::div().set(<span class="stringliteral">"align"</span>,<span class="stringliteral">"center"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"notice"</span>) &lt;&lt; endl;
00263 
00264     cout &lt;&lt; h2(e.what()) &lt;&lt; endl;
00265 
00266     <span class="comment">// End of document</span>
00267     cout &lt;&lt; cgicc::div() &lt;&lt; endl;
00268     cout &lt;&lt; hr().set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"half"</span>) &lt;&lt; endl;
00269     cout &lt;&lt; body() &lt;&lt; html() &lt;&lt; endl;
00270     
00271     <span class="keywordflow">return</span> EXIT_SUCCESS;
00272   }
00273 }
00274 
00275 <span class="comment">// Print out a table of the CgiEnvironment</span>
00276 <span class="keywordtype">void</span>
00277 dumpEnvironment(<span class="keyword">const</span> <a class="code" href="classcgicc_1_1CgiEnvironment.html">CgiEnvironment</a>&amp; env) 
00278 {
00279   <span class="comment">// This is just a brain-dead dump of information.</span>
00280   <span class="comment">// Almost all of this code is for HTML formatting</span>
00281   cout &lt;&lt; h2(<span class="stringliteral">"Environment information from CgiEnvironment"</span>) &lt;&lt; endl;
00282   
00283   cout &lt;&lt; cgicc::div().set(<span class="stringliteral">"align"</span>,<span class="stringliteral">"center"</span>) &lt;&lt; endl;
00284   
00285   cout &lt;&lt; table().set(<span class="stringliteral">"border"</span>,<span class="stringliteral">"0"</span>).set(<span class="stringliteral">"rules"</span>,<span class="stringliteral">"none"</span>).set(<span class="stringliteral">"frame"</span>,<span class="stringliteral">"void"</span>)
00286                  .set(<span class="stringliteral">"cellspacing"</span>,<span class="stringliteral">"2"</span>).set(<span class="stringliteral">"cellpadding"</span>,<span class="stringliteral">"2"</span>)
00287                  .set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"cgi"</span>) &lt;&lt; endl;
00288   cout &lt;&lt; colgroup().set(<span class="stringliteral">"span"</span>,<span class="stringliteral">"2"</span>) &lt;&lt; endl;
00289   cout &lt;&lt; col().set(<span class="stringliteral">"align"</span>,<span class="stringliteral">"center"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>).set(<span class="stringliteral">"span"</span>,<span class="stringliteral">"1"</span>) 
00290        &lt;&lt; endl;
00291   cout &lt;&lt; col().set(<span class="stringliteral">"align"</span>,<span class="stringliteral">"left"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>).set(<span class="stringliteral">"span"</span>,<span class="stringliteral">"1"</span>) 
00292        &lt;&lt; endl;
00293   cout &lt;&lt; colgroup() &lt;&lt; endl;
00294   
00295   cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"Request Method"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>) 
00296        &lt;&lt; td(env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z17_2">getRequestMethod</a>()).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; tr() &lt;&lt; endl;
00297   cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"Path Info"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>) 
00298        &lt;&lt; td(env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z17_3">getPathInfo</a>()).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; tr() &lt;&lt; endl;
00299   cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"Path Translated"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>) 
00300        &lt;&lt; td(env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z17_4">getPathTranslated</a>()).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; tr() &lt;&lt; endl;
00301   cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"Script Name"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>) 
00302        &lt;&lt; td(env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z17_5">getScriptName</a>()).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; tr() &lt;&lt; endl;
00303   cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"HTTP Referrer"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>) 
00304        &lt;&lt; td(env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z19_0">getReferrer</a>()).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; tr() &lt;&lt; endl;
00305   cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"HTTP Cookie"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>) 
00306        &lt;&lt; td(env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z17_0">getCookies</a>()).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; tr() &lt;&lt; endl;
00307   cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"Query String"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>) 
00308        &lt;&lt; td(env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z17_6">getQueryString</a>()).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; tr() &lt;&lt; endl;
00309   cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"Content Length"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>) 
00310        &lt;&lt; td().set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z17_7">getContentLength</a>() 
00311        &lt;&lt; td() &lt;&lt; tr() &lt;&lt; endl;
00312   cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"Post Data"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>)
00313        &lt;&lt; td().set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>)
00314        &lt;&lt; pre(env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z17_9">getPostData</a>()).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; td() 
00315        &lt;&lt; tr() &lt;&lt; endl;
00316   cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"Remote Host"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>) 
00317        &lt;&lt; td(env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z21_0">getRemoteHost</a>()).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; tr() &lt;&lt; endl;
00318   cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"Remote Address"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>) 
00319        &lt;&lt; td(env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z21_1">getRemoteAddr</a>()).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; tr() &lt;&lt; endl;
00320   cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"Authorization Type"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>) 
00321        &lt;&lt; td(env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z21_2">getAuthType</a>()).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; tr() &lt;&lt; endl;
00322   cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"Remote User"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>) 
00323        &lt;&lt; td(env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z21_3">getRemoteUser</a>()).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; tr() &lt;&lt; endl;
00324   cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"Remote Identification"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>) 
00325        &lt;&lt; td(env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z21_4">getRemoteIdent</a>()).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; tr() &lt;&lt; endl;
00326   cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"Content Type"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>) 
00327        &lt;&lt; td(env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z17_8">getContentType</a>()).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; tr() &lt;&lt; endl;
00328   cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"HTTP Accept"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>) 
00329        &lt;&lt; td(env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z21_5">getAccept</a>()).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; tr() &lt;&lt; endl;
00330   cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"User Agent"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>) 
00331        &lt;&lt; td(env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z21_6">getUserAgent</a>()).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; tr() &lt;&lt; endl;
00332   cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"Server Software"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>) 
00333        &lt;&lt; td(env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z15_0">getServerSoftware</a>()).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; tr() &lt;&lt; endl;
00334   cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"Server Name"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>) 
00335        &lt;&lt; td(env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z15_1">getServerName</a>()).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; tr() &lt;&lt; endl;
00336   cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"Gateway Interface"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>) 
00337        &lt;&lt; td(env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z15_2">getGatewayInterface</a>()).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; tr() &lt;&lt; endl;
00338   cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"Server Protocol"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>) 
00339        &lt;&lt; td(env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z15_3">getServerProtocol</a>()).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; tr() &lt;&lt; endl;
00340   cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"Server Port"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>) 
00341        &lt;&lt; td().set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z15_4">getServerPort</a>() 
00342        &lt;&lt; td() &lt;&lt; tr() &lt;&lt; endl;
00343   cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"HTTPS"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>)
00344        &lt;&lt; td().set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; (env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z15_5">usingHTTPS</a>() ? <span class="stringliteral">"true"</span> : <span class="stringliteral">"false"</span>)
00345        &lt;&lt; td() &lt;&lt; tr() &lt;&lt; endl;
00346   cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"Redirect Request"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>) 
00347        &lt;&lt; td(env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z23_0">getRedirectRequest</a>()).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; tr() &lt;&lt; endl;
00348   cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"Redirect URL"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>) 
00349        &lt;&lt; td(env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z23_1">getRedirectURL</a>()).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; tr() &lt;&lt; endl;
00350   cout &lt;&lt; tr() &lt;&lt; td(<span class="stringliteral">"Redirect Status"</span>).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>) 
00351        &lt;&lt; td(env.<a class="code" href="classcgicc_1_1CgiEnvironment.html#z23_2">getRedirectStatus</a>()).set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; tr() &lt;&lt; endl;
00352   
00353   cout &lt;&lt; table() &lt;&lt; cgicc::div() &lt;&lt; endl;
00354 }
00355 
00356 <span class="comment">// Print out the value of every form element</span>
00357 <span class="keywordtype">void</span>
00358 dumpList(<span class="keyword">const</span> <a class="code" href="classcgicc_1_1Cgicc.html">Cgicc</a>&amp; formData) 
00359 {
00360   cout &lt;&lt; h2(<span class="stringliteral">"Form Data via vector"</span>) &lt;&lt; endl;
00361   
00362   cout &lt;&lt; cgicc::div().set(<span class="stringliteral">"align"</span>,<span class="stringliteral">"center"</span>) &lt;&lt; endl;
00363   
00364   cout &lt;&lt; table().set(<span class="stringliteral">"border"</span>,<span class="stringliteral">"0"</span>).set(<span class="stringliteral">"rules"</span>,<span class="stringliteral">"none"</span>).set(<span class="stringliteral">"frame"</span>,<span class="stringliteral">"void"</span>)
00365                  .set(<span class="stringliteral">"cellspacing"</span>,<span class="stringliteral">"2"</span>).set(<span class="stringliteral">"cellpadding"</span>,<span class="stringliteral">"2"</span>)
00366                  .set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"cgi"</span>) &lt;&lt; endl;
00367   cout &lt;&lt; colgroup().set(<span class="stringliteral">"span"</span>,<span class="stringliteral">"2"</span>) &lt;&lt; endl;
00368   cout &lt;&lt; col().set(<span class="stringliteral">"align"</span>,<span class="stringliteral">"center"</span>).set(<span class="stringliteral">"span"</span>,<span class="stringliteral">"2"</span>) &lt;&lt; endl;
00369   cout &lt;&lt; colgroup() &lt;&lt; endl;
00370   
00371   cout &lt;&lt; tr().set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"title"</span>) &lt;&lt; td(<span class="stringliteral">"Element Name"</span>) 
00372        &lt;&lt; td(<span class="stringliteral">"Element Value"</span>) &lt;&lt; tr() &lt;&lt; endl;
00373   
00374   <span class="comment">// Iterate through the vector, and print out each value</span>
00375   <a class="code" href="namespacecgicc.html#a1">const_form_iterator</a> iter;
00376   <span class="keywordflow">for</span>(iter = formData.<a class="code" href="classcgicc_1_1Cgicc.html#z5_10">getElements</a>().begin(); 
00377       iter != formData.<a class="code" href="classcgicc_1_1Cgicc.html#z5_10">getElements</a>().end(); 
00378       ++iter) {
00379     cout &lt;&lt; tr().set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"data"</span>) &lt;&lt; td(iter-&gt;getName()) 
00380          &lt;&lt; td(iter-&gt;getValue()) &lt;&lt; tr() &lt;&lt; endl;
00381   }
00382   cout &lt;&lt; table() &lt;&lt; cgicc::div() &lt;&lt; endl;
00383 }
00384 
00385 <span class="comment">// Print out information customized for each element</span>
00386 <span class="keywordtype">void</span>
00387 showForm(<span class="keyword">const</span> <a class="code" href="classcgicc_1_1Cgicc.html">Cgicc</a>&amp; formData) 
00388 {
00389 
00390   <span class="comment">// I am using an if statement to check if each element is found</span>
00391   cout &lt;&lt; h2(<span class="stringliteral">"Form Data via Cgicc"</span>) &lt;&lt; endl;
00392   
00393   cout &lt;&lt; cgicc::div().set(<span class="stringliteral">"class"</span>,<span class="stringliteral">"notice"</span>) &lt;&lt; endl;
00394 
00395   <span class="comment">//getElement</span>
00396   <a class="code" href="namespacecgicc.html#a1">const_form_iterator</a> name = formData.<a class="code" href="classcgicc_1_1Cgicc.html#z5_3">getElement</a>(<span class="stringliteral">"name"</span>);
00397   <span class="keywordflow">if</span>(name != (*formData).end() &amp;&amp; ! name-&gt;isEmpty())
00398     cout &lt;&lt; <span class="stringliteral">"Your name is "</span> &lt;&lt; **name &lt;&lt; <span class="charliteral">'.'</span> &lt;&lt; br() &lt;&lt; endl;
00399   <span class="keywordflow">else</span>
00400     cout &lt;&lt; <span class="stringliteral">"You don't have a name."</span> &lt;&lt; br() &lt;&lt; endl;
00401 
00402   <span class="comment">// getElement and getDoubleValue</span>
00403   <a class="code" href="namespacecgicc.html#a1">const_form_iterator</a> salary = formData.<a class="code" href="classcgicc_1_1Cgicc.html#z5_3">getElement</a>(<span class="stringliteral">"bucks"</span>);
00404   <span class="keywordflow">if</span>(salary != (*formData).end() &amp;&amp; ! salary-&gt;isEmpty())
00405     cout &lt;&lt; <span class="stringliteral">"You make "</span> &lt;&lt; (*salary).getDoubleValue(80, 120) 
00406          &lt;&lt; <span class="stringliteral">" million dollars."</span> &lt;&lt; br() &lt;&lt; endl;
00407   <span class="keywordflow">else</span>
00408     cout &lt;&lt; <span class="stringliteral">"You don't have a salary."</span> &lt;&lt; br() &lt;&lt; endl;
00409 
00410   <span class="comment">// getElement and getIntegerValue</span>
00411   <a class="code" href="namespacecgicc.html#a1">const_form_iterator</a> hours = formData.<a class="code" href="classcgicc_1_1Cgicc.html#z5_3">getElement</a>(<span class="stringliteral">"time"</span>);
00412   <span class="keywordflow">if</span>(hours != (*formData).end() &amp;&amp; ! (*hours).isEmpty())
00413     cout &lt;&lt; <span class="stringliteral">"You've wasted "</span> &lt;&lt; (*hours).getIntegerValue() 
00414          &lt;&lt; <span class="stringliteral">" hours on the web."</span> &lt;&lt; br() &lt;&lt; endl;
00415   <span class="keywordflow">else</span>
00416     cout &lt;&lt; <span class="stringliteral">"You haven't wasted any time on the web."</span> &lt;&lt; br() &lt;&lt; endl;
00417 
00418   <span class="comment">// getElement and getStrippedValue</span>
00419   <a class="code" href="namespacecgicc.html#a1">const_form_iterator</a> thoughts = formData.<a class="code" href="classcgicc_1_1Cgicc.html#z5_3">getElement</a>(<span class="stringliteral">"thoughts"</span>);
00420   <span class="keywordflow">if</span>(thoughts != (*formData).end() &amp;&amp; ! (*thoughts).isEmpty()) {
00421     std::string temp = (*thoughts).getStrippedValue();
00422     cout &lt;&lt; <span class="stringliteral">"Your thoughts : "</span> &lt;&lt; temp &lt;&lt; br() &lt;&lt; endl;
00423   }
00424   <span class="keywordflow">else</span>
00425     cout &lt;&lt; <span class="stringliteral">"You don't have any thoughts!?"</span> &lt;&lt; br() &lt;&lt; endl;
00426   
00427   <span class="comment">// queryCheckbox</span>
00428   <span class="keywordflow">if</span>(formData.<a class="code" href="classcgicc_1_1Cgicc.html#z5_0">queryCheckbox</a>(<span class="stringliteral">"hungry"</span>))
00429     cout &lt;&lt; <span class="stringliteral">"You are hungry."</span> &lt;&lt; br() &lt;&lt; endl;
00430   <span class="keywordflow">else</span>
00431     cout &lt;&lt; <span class="stringliteral">"You are not hungry."</span> &lt;&lt; br() &lt;&lt; endl;
00432 
00433   <span class="comment">// getElement</span>
00434   std::vector&lt;FormEntry&gt; flavors;
00435   formData.<a class="code" href="classcgicc_1_1Cgicc.html#z5_3">getElement</a>(<span class="stringliteral">"flavors"</span>, flavors);
00436   <span class="keywordflow">if</span>(! flavors.empty()) {
00437     cout &lt;&lt; <span class="stringliteral">"You like "</span>;
00438     <span class="keywordflow">for</span>(std::string::size_type i = 0; i &lt; flavors.size(); i++) {
00439       cout &lt;&lt; flavors[i].getValue();
00440       <span class="keywordflow">if</span>(i &lt; flavors.size() - 2)
00441         cout &lt;&lt; <span class="stringliteral">", "</span>;
00442       <span class="keywordflow">else</span> <span class="keywordflow">if</span>(i == flavors.size() - 2)
00443         cout &lt;&lt; <span class="stringliteral">" and "</span>;
00444     }
00445     cout &lt;&lt; <span class="stringliteral">" ice cream."</span> &lt;&lt; br() &lt;&lt; endl;
00446   }
00447   <span class="keywordflow">else</span>
00448     cout &lt;&lt; <span class="stringliteral">"You don't like ice cream!?"</span> &lt;&lt; br() &lt;&lt; endl;
00449   
00450   <span class="comment">// getElement</span>
00451   <a class="code" href="namespacecgicc.html#a1">const_form_iterator</a> hair = formData.<a class="code" href="classcgicc_1_1Cgicc.html#z5_3">getElement</a>(<span class="stringliteral">"hair"</span>);
00452   <span class="keywordflow">if</span>(hair != (*formData).end())
00453     cout &lt;&lt; <span class="stringliteral">"Your hair is "</span> &lt;&lt; **hair &lt;&lt; <span class="charliteral">'.'</span> &lt;&lt; br() &lt;&lt; endl;
00454   <span class="keywordflow">else</span>
00455     cout &lt;&lt; <span class="stringliteral">"You don't have any hair."</span> &lt;&lt; br() &lt;&lt; endl;
00456   
00457   <a class="code" href="namespacecgicc.html#a1">const_form_iterator</a> browser = formData.<a class="code" href="classcgicc_1_1Cgicc.html#z5_3">getElement</a>(<span class="stringliteral">"browser"</span>);
00458   <span class="keywordflow">if</span>(browser != (*formData).end())
00459     cout &lt;&lt; <span class="stringliteral">"You surf the web with "</span> &lt;&lt; **browser &lt;&lt; <span class="charliteral">'.'</span> &lt;&lt; br() &lt;&lt; endl;
00460   <span class="keywordflow">else</span>
00461     cout &lt;&lt; <span class="stringliteral">"This should never happen. ERROR!"</span> &lt;&lt; br() &lt;&lt; endl;
00462   
00463   <span class="comment">// getElement</span>
00464   std::vector&lt;FormEntry&gt; authors;
00465   formData.<a class="code" href="classcgicc_1_1Cgicc.html#z5_3">getElement</a>(<span class="stringliteral">"authors"</span>, authors);
00466   <span class="keywordflow">if</span>(! authors.empty()) {
00467     cout &lt;&lt; <span class="stringliteral">"You like to read books by "</span>;
00468     <span class="keywordflow">for</span>(std::string::size_type i = 0; i &lt; authors.size(); i++) {
00469       cout &lt;&lt; authors[i].getValue();
00470       <span class="keywordflow">if</span>(i &lt; authors.size() - 2)
00471         cout &lt;&lt; <span class="stringliteral">", "</span>;
00472       <span class="keywordflow">else</span> <span class="keywordflow">if</span>(i == authors.size() - 2)
00473         cout &lt;&lt; <span class="stringliteral">" and "</span>;
00474     }
00475     cout &lt;&lt; <span class="stringliteral">"."</span> &lt;&lt; br() &lt;&lt; endl;
00476   }
00477   <span class="keywordflow">else</span>
00478     cout &lt;&lt; <span class="stringliteral">"You don't like to read!?"</span> &lt;&lt; br() &lt;&lt; endl;
00479   
00480   cout &lt;&lt; cgicc::div() &lt;&lt; endl;
00481 }
</pre></div><!-- $Id: footer.html,v 1.7 2004/06/12 01:58:25 sbooth Exp $ -->

<hr>

<address><small>
<a href="http://www.cgicc.org">GNU cgicc</a> - A C++ class library for
writing CGI applications<br />
Copyright &copy; 1996 - 2004 
<a href="mailto:sboothATgnuDOTorg">Stephen F. Booth</a><br />
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.1 or
any later version published by the Free Software Foundation; with no
Invariant Sections, with no Front Cover Texts, and with no Back-Cover
Texts.<br />
Documentation generated Sat Jun 19 00:36:23 2004 for cgicc by
<a HREF="http://www.doxygen.org/index.html">doxygen</a> 1.3.6
</small></address>

</body>

</html>

