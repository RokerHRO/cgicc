<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
   "http://www.w3.org/TR/REC-html40/loose.dtd">

<html lang="en" dir="LTR">

<head>
  <!-- $Id: header.html,v 1.2 2002/01/09 17:13:12 sbooth Exp $ -->
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <title>cookie.cpp Source File</title>
  <link rev="made" href="mailto:sbooth@gnu.org" />
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="cgicc.css" rel="stylesheet" type="text/css" />
</head>

<body>
<!-- Generated by Doxygen 1.2.13.1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>cookie.cpp</h1><a href="cookie_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment"> *  $Id: cookie.cpp,v 1.1 2001/09/03 16:14:26 sbooth Exp $</font>
00003 <font class="comment"> *</font>
00004 <font class="comment"> *  Copyright (C) 2000, 2001 Stephen F. Booth</font>
00005 <font class="comment"> *</font>
00006 <font class="comment"> *  This program is free software; you can redistribute it and/or modify</font>
00007 <font class="comment"> *  it under the terms of the GNU General Public License as published by</font>
00008 <font class="comment"> *  the Free Software Foundation; either version 2 of the License, or</font>
00009 <font class="comment"> *  (at your option) any later version.</font>
00010 <font class="comment"> *</font>
00011 <font class="comment"> *  This program is distributed in the hope that it will be useful,</font>
00012 <font class="comment"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</font>
00013 <font class="comment"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</font>
00014 <font class="comment"> *  GNU General Public License for more details.</font>
00015 <font class="comment"> *</font>
00016 <font class="comment"> *  You should have received a copy of the GNU General Public License</font>
00017 <font class="comment"> *  along with this program; if not, write to the Free Software</font>
00018 <font class="comment"> *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</font>
00019 <font class="comment"> */</font>
00020 
00027 <font class="preprocessor">#include &lt;new&gt;</font>
00028 <font class="preprocessor">#include &lt;string&gt;</font>
00029 <font class="preprocessor">#include &lt;vector&gt;</font>
00030 <font class="preprocessor">#include &lt;stdexcept&gt;</font>
00031 <font class="preprocessor">#include &lt;iostream&gt;</font>
00032 <font class="preprocessor">#include &lt;cstdlib&gt;</font>
00033 
00034 <font class="preprocessor">#include "<a class="code" href="CgiDefs_8h.html">cgicc/CgiDefs.h</a>"</font>
00035 <font class="preprocessor">#include "<a class="code" href="Cgicc_8h.html">cgicc/Cgicc.h</a>"</font>
00036 <font class="preprocessor">#include "cgicc/HTTPHeaders.h"</font>
00037 <font class="preprocessor">#include "<a class="code" href="HTMLClasses_8h.html">cgicc/HTMLClasses.h</a>"</font>
00038 
00039 <font class="preprocessor">#if HAVE_UNAME</font>
00040 <font class="preprocessor"></font><font class="preprocessor">#  include &lt;sys/utsname.h&gt;</font>
00041 <font class="preprocessor">#endif</font>
00042 <font class="preprocessor"></font>
00043 <font class="preprocessor">#if HAVE_SYS_TIME_H</font>
00044 <font class="preprocessor"></font><font class="preprocessor">#  include &lt;sys/time.h&gt;</font>
00045 <font class="preprocessor">#endif</font>
00046 <font class="preprocessor"></font>
00047 <font class="comment">// To use logging, the variable gLogFile MUST be defined, and it _must_</font>
00048 <font class="comment">// be an ofstream</font>
00049 <font class="preprocessor">#if DEBUG</font>
00050 <font class="preprocessor"></font>  STDNS ofstream gLogFile( <font class="stringliteral">"/change_this_path/cgicc.log"</font>, STDNS ios::app );
00051 <font class="preprocessor">#endif</font>
00052 <font class="preprocessor"></font>
00053 <font class="preprocessor">#if CGICC_USE_NAMESPACES</font>
00054 <font class="preprocessor"></font>  <font class="keyword">using</font> <font class="keyword">namespace </font>std;
00055   <font class="keyword">using</font> <font class="keyword">namespace </font>cgicc;
00056 <font class="preprocessor">#else</font>
00057 <font class="preprocessor"></font><font class="preprocessor">#  define div div_</font>
00058 <font class="preprocessor"></font><font class="preprocessor">#  define link link_</font>
00059 <font class="preprocessor"></font><font class="preprocessor">#  define select select_</font>
00060 <font class="preprocessor"></font><font class="preprocessor">#endif</font>
00061 <font class="preprocessor"></font>
00062 <font class="comment">// Main Street, USA</font>
00063 <font class="keywordtype">int</font>
00064 main(<font class="keywordtype">int</font> <font class="comment">/*argc*/</font>, 
00065      <font class="keywordtype">char</font> ** <font class="comment">/*argv*/</font>)
00066 {
00067   <font class="keywordflow">try</font> {
00068 <font class="preprocessor">#if HAVE_GETTIMEOFDAY</font>
00069 <font class="preprocessor"></font>    timeval start;
00070     gettimeofday(&amp;start, NULL);
00071 <font class="preprocessor">#endif</font>
00072 <font class="preprocessor"></font>
00073     <font class="comment">// Create a new Cgicc object containing all the CGI data</font>
00074     Cgicc cgi;
00075 
00076     <font class="comment">// Get the name and value of the cookie to set</font>
00077     <a class="code" href="namespacecgicc.html#a1">const_form_iterator</a> name = cgi.getElement(<font class="stringliteral">"name"</font>);
00078     <a class="code" href="namespacecgicc.html#a1">const_form_iterator</a> value = cgi.getElement(<font class="stringliteral">"value"</font>);
00079 
00080     <font class="comment">// Output the headers for an HTML document with the cookie only</font>
00081     <font class="comment">// if the cookie is not empty</font>
00082     <font class="keywordflow">if</font>(name != cgi.getElements().end() &amp;&amp; value != cgi.getElements().end()
00083        &amp;&amp; value-&gt;getValue().empty() == <font class="keyword">false</font>)
00084       cout &lt;&lt; HTTPHTMLHeader()
00085         .setCookie(HTTPCookie(name-&gt;getValue(), value-&gt;getValue()));
00086     <font class="keywordflow">else</font>
00087       cout &lt;&lt; HTTPHTMLHeader();
00088     
00089     <font class="comment">// Output the HTML 4.0 DTD info</font>
00090     cout &lt;&lt; HTMLDoctype(HTMLDoctype::eStrict) &lt;&lt; endl;
00091     cout &lt;&lt; html().set(<font class="stringliteral">"lang"</font>, <font class="stringliteral">"en"</font>).set(<font class="stringliteral">"dir"</font>, <font class="stringliteral">"ltr"</font>) &lt;&lt; endl;
00092 
00093     <font class="comment">// Set up the page's header and title.</font>
00094     <font class="comment">// I will put in lfs to ease reading of the produced HTML. </font>
00095     cout &lt;&lt; head() &lt;&lt; endl;
00096 
00097     <font class="comment">// Output the style sheet portion of the header</font>
00098     cout &lt;&lt; style() &lt;&lt; comment() &lt;&lt; endl;
00099     cout &lt;&lt; <font class="stringliteral">"body { color: black; background-color: white; }"</font> &lt;&lt; endl;
00100     cout &lt;&lt; <font class="stringliteral">"hr.half { width: 60%; align: center; }"</font> &lt;&lt; endl;
00101     cout &lt;&lt; <font class="stringliteral">"span.red, strong.red { color: red; }"</font> &lt;&lt; endl;
00102     cout &lt;&lt; <font class="stringliteral">"div.smaller { font-size: small; }"</font> &lt;&lt; endl;
00103     cout &lt;&lt; <font class="stringliteral">"div.notice { border: solid thin; padding: 1em; margin: 1em 0; "</font>
00104          &lt;&lt; <font class="stringliteral">"background: #ddd; }"</font> &lt;&lt; endl;
00105     cout &lt;&lt; <font class="stringliteral">"span.blue { color: blue; }"</font> &lt;&lt; endl;
00106     cout &lt;&lt; <font class="stringliteral">"col.title { color: white; background-color: black; "</font>;
00107     cout &lt;&lt; <font class="stringliteral">"font-weight: bold; text-align: center; }"</font> &lt;&lt; endl;
00108     cout &lt;&lt; <font class="stringliteral">"col.data { background-color: #ddd; text-align: left; }"</font> &lt;&lt; endl;
00109     cout &lt;&lt; <font class="stringliteral">"td.data, TR.data { background-color: #ddd; text-align: left; }"</font>
00110          &lt;&lt; endl;
00111     cout &lt;&lt; <font class="stringliteral">"td.grayspecial { background-color: #ddd; text-align: left; }"</font>
00112          &lt;&lt; endl;
00113     cout &lt;&lt; <font class="stringliteral">"td.ltgray, tr.ltgray { background-color: #ddd; }"</font> &lt;&lt; endl;
00114     cout &lt;&lt; <font class="stringliteral">"td.dkgray, tr.dkgray { background-color: #bbb; }"</font> &lt;&lt; endl;
00115     cout &lt;&lt; <font class="stringliteral">"col.black, td.black, td.title, tr.title { color: white; "</font> 
00116          &lt;&lt; <font class="stringliteral">"background-color: black; font-weight: bold; text-align: center; }"</font>
00117          &lt;&lt; endl;
00118     cout &lt;&lt; <font class="stringliteral">"col.gray, td.gray { background-color: #ddd; text-align: center; }"</font>
00119          &lt;&lt; endl;
00120     cout &lt;&lt; <font class="stringliteral">"table.cgi { left-margin: auto; right-margin: auto; width: 90%; }"</font>
00121          &lt;&lt; endl;
00122 
00123     cout &lt;&lt; comment() &lt;&lt; style() &lt;&lt; endl;
00124 
00125     cout &lt;&lt; title() &lt;&lt; <font class="stringliteral">"GNU cgicc v"</font> &lt;&lt; cgi.getVersion() 
00126          &lt;&lt; <font class="stringliteral">" HTTPCookie Results"</font> &lt;&lt; title() &lt;&lt; endl;
00127     cout &lt;&lt; meta().set(<font class="stringliteral">"name"</font>, <font class="stringliteral">"author"</font>).set(<font class="stringliteral">"content"</font>, <font class="stringliteral">"Stephen F. Booth"</font>) 
00128          &lt;&lt; endl;
00129 
00130     cout &lt;&lt; head() &lt;&lt; endl;
00131     
00132     <font class="comment">// Start the HTML body</font>
00133     cout &lt;&lt; body() &lt;&lt; endl;
00134 
00135     cout &lt;&lt; h1() &lt;&lt; <font class="stringliteral">"GNU cgi"</font> &lt;&lt; span(<font class="stringliteral">"cc"</font>).set(<font class="stringliteral">"class"</font>,<font class="stringliteral">"red"</font>)
00136          &lt;&lt; <font class="stringliteral">" v"</font>&lt;&lt; cgi.getVersion() &lt;&lt; <font class="stringliteral">" HTTPCookie Test Results"</font> 
00137          &lt;&lt; h1() &lt;&lt; endl;
00138     
00139     <font class="comment">// Get a pointer to the environment</font>
00140     <font class="keyword">const</font> CgiEnvironment&amp; env = cgi.getEnvironment();
00141     
00142     <font class="comment">// Generic thank you message</font>
00143     cout &lt;&lt; comment() &lt;&lt; <font class="stringliteral">"This page generated by cgicc for "</font>
00144          &lt;&lt; env.getRemoteHost() &lt;&lt; comment() &lt;&lt; endl;
00145     cout &lt;&lt; h4() &lt;&lt; <font class="stringliteral">"Thanks for using cgi"</font> &lt;&lt; span(<font class="stringliteral">"cc"</font>).set(<font class="stringliteral">"class"</font>, <font class="stringliteral">"red"</font>) 
00146          &lt;&lt; <font class="stringliteral">", "</font> &lt;&lt; env.getRemoteHost() 
00147          &lt;&lt; <font class="charliteral">'('</font> &lt;&lt; env.getRemoteAddr() &lt;&lt; <font class="stringliteral">")!"</font> &lt;&lt; h4() &lt;&lt; endl;  
00148     
00149     <font class="keywordflow">if</font>(name != cgi.getElements().end() &amp;&amp; value != cgi.getElements().end()
00150        &amp;&amp; value-&gt;getValue().empty() == <font class="keyword">false</font>) {
00151       cout &lt;&lt; p() &lt;&lt; <font class="stringliteral">"A cookie with the name "</font> &lt;&lt; em(name-&gt;getValue())
00152            &lt;&lt; <font class="stringliteral">" and value "</font> &lt;&lt; em(value-&gt;getValue()) &lt;&lt; <font class="stringliteral">" was set."</font> &lt;&lt; br();
00153       cout &lt;&lt; <font class="stringliteral">"In order for the cookie to show up here you must "</font>
00154            &lt;&lt; a(<font class="stringliteral">"refresh"</font>).set(<font class="stringliteral">"href"</font>,env.getScriptName()) &lt;&lt; p();
00155     }
00156 
00157     <font class="comment">// Show the cookie info from the environment</font>
00158     cout &lt;&lt; h2(<font class="stringliteral">"Cookie Information from the Environment"</font>) &lt;&lt; endl;
00159   
00160     cout &lt;&lt; CGICCNS div().set(<font class="stringliteral">"align"</font>,<font class="stringliteral">"center"</font>) &lt;&lt; endl;
00161     
00162     cout &lt;&lt; table().set(<font class="stringliteral">"border"</font>,<font class="stringliteral">"0"</font>).set(<font class="stringliteral">"rules"</font>,<font class="stringliteral">"none"</font>).set(<font class="stringliteral">"frame"</font>,<font class="stringliteral">"void"</font>)
00163       .set(<font class="stringliteral">"cellspacing"</font>,<font class="stringliteral">"2"</font>).set(<font class="stringliteral">"cellpadding"</font>,<font class="stringliteral">"2"</font>)
00164       .set(<font class="stringliteral">"class"</font>,<font class="stringliteral">"cgi"</font>) &lt;&lt; endl;
00165     cout &lt;&lt; colgroup().set(<font class="stringliteral">"span"</font>,<font class="stringliteral">"2"</font>) &lt;&lt; endl;
00166     cout &lt;&lt; col().set(<font class="stringliteral">"align"</font>,<font class="stringliteral">"center"</font>).set(<font class="stringliteral">"class"</font>,<font class="stringliteral">"title"</font>).set(<font class="stringliteral">"span"</font>,<font class="stringliteral">"1"</font>) 
00167          &lt;&lt; endl;
00168     cout &lt;&lt; col().set(<font class="stringliteral">"align"</font>,<font class="stringliteral">"left"</font>).set(<font class="stringliteral">"class"</font>,<font class="stringliteral">"data"</font>).set(<font class="stringliteral">"span"</font>,<font class="stringliteral">"1"</font>) 
00169          &lt;&lt; endl;
00170     cout &lt;&lt; colgroup() &lt;&lt; endl;
00171     
00172     cout &lt;&lt; tr() &lt;&lt; td(<font class="stringliteral">"HTTPCookie"</font>).set(<font class="stringliteral">"class"</font>,<font class="stringliteral">"title"</font>)
00173          &lt;&lt; td(env.getCookies()).set(<font class="stringliteral">"class"</font>,<font class="stringliteral">"data"</font>) &lt;&lt; tr() &lt;&lt; endl;
00174     
00175     cout &lt;&lt; table() &lt;&lt; CGICCNS div() &lt;&lt; endl;
00176 
00177 
00178     <font class="comment">// Show the cookie info from the cookie list</font>
00179     cout &lt;&lt; h2(<font class="stringliteral">"HTTP Cookies via vector"</font>) &lt;&lt; endl;
00180   
00181     cout &lt;&lt; CGICCNS div().set(<font class="stringliteral">"align"</font>,<font class="stringliteral">"center"</font>) &lt;&lt; endl;
00182   
00183     cout &lt;&lt; table().set(<font class="stringliteral">"border"</font>,<font class="stringliteral">"0"</font>).set(<font class="stringliteral">"rules"</font>,<font class="stringliteral">"none"</font>).set(<font class="stringliteral">"frame"</font>,<font class="stringliteral">"void"</font>)
00184       .set(<font class="stringliteral">"cellspacing"</font>,<font class="stringliteral">"2"</font>).set(<font class="stringliteral">"cellpadding"</font>,<font class="stringliteral">"2"</font>)
00185       .set(<font class="stringliteral">"class"</font>,<font class="stringliteral">"cgi"</font>) &lt;&lt; endl;
00186     cout &lt;&lt; colgroup().set(<font class="stringliteral">"span"</font>,<font class="stringliteral">"2"</font>) &lt;&lt; endl;
00187     cout &lt;&lt; col().set(<font class="stringliteral">"align"</font>,<font class="stringliteral">"center"</font>).set(<font class="stringliteral">"span"</font>,<font class="stringliteral">"2"</font>) &lt;&lt; endl;
00188     cout &lt;&lt; colgroup() &lt;&lt; endl;
00189     
00190     cout &lt;&lt; tr().set(<font class="stringliteral">"class"</font>,<font class="stringliteral">"title"</font>) &lt;&lt; td(<font class="stringliteral">"Cookie Name"</font>) 
00191          &lt;&lt; td(<font class="stringliteral">"Cookie Value"</font>) &lt;&lt; tr() &lt;&lt; endl;
00192     
00193     <font class="comment">// Iterate through the vector, and print out each value</font>
00194     <a class="code" href="namespacecgicc.html#a6">const_cookie_iterator</a> iter;
00195     <font class="keywordflow">for</font>(iter = env.getCookieList().begin(); 
00196         iter != env.getCookieList().end(); 
00197         ++iter) {
00198       cout &lt;&lt; tr().set(<font class="stringliteral">"class"</font>,<font class="stringliteral">"data"</font>) &lt;&lt; td(iter-&gt;getName()) 
00199            &lt;&lt; td(iter-&gt;getValue()) &lt;&lt; tr() &lt;&lt; endl;
00200     }
00201     cout &lt;&lt; table() &lt;&lt; CGICCNS div() &lt;&lt; endl;
00202     
00203 
00204     <font class="comment">// Now print out a footer with some fun info</font>
00205     cout &lt;&lt; p() &lt;&lt; CGICCNS div().set(<font class="stringliteral">"align"</font>,<font class="stringliteral">"center"</font>);
00206     cout &lt;&lt; a(<font class="stringliteral">"Back to form"</font>).set(<font class="stringliteral">"href"</font>, cgi.getEnvironment().getReferrer()) 
00207          &lt;&lt; endl;
00208     cout &lt;&lt; CGICCNS div() &lt;&lt; br() &lt;&lt; hr(set(<font class="stringliteral">"class"</font>,<font class="stringliteral">"half"</font>)) &lt;&lt; endl;
00209     
00210     <font class="comment">// Information on cgicc</font>
00211     cout &lt;&lt; CGICCNS div().set(<font class="stringliteral">"align"</font>,<font class="stringliteral">"center"</font>).set(<font class="stringliteral">"class"</font>,<font class="stringliteral">"smaller"</font>) &lt;&lt; endl;
00212     cout &lt;&lt; <font class="stringliteral">"GNU cgi"</font> &lt;&lt; span(<font class="stringliteral">"cc"</font>).set(<font class="stringliteral">"class"</font>,<font class="stringliteral">"red"</font>) &lt;&lt; <font class="stringliteral">" v"</font>;
00213     cout &lt;&lt; cgi.getVersion();
00214     cout &lt;&lt; <font class="stringliteral">" by "</font> &lt;&lt; a(<font class="stringliteral">"Stephen F. Booth"</font>)
00215                        .set(<font class="stringliteral">"href"</font>, <font class="stringliteral">"mailto:sbooth@gnu.org"</font>) 
00216          &lt;&lt; br() &lt;&lt; endl;
00217     cout &lt;&lt; <font class="stringliteral">"Compiled at "</font> &lt;&lt; cgi.getCompileTime();
00218     cout &lt;&lt; <font class="stringliteral">" on "</font> &lt;&lt; cgi.getCompileDate() &lt;&lt; br() &lt;&lt; endl;
00219 
00220     cout &lt;&lt; <font class="stringliteral">"Configured for "</font> &lt;&lt; cgi.getHost();  
00221 <font class="preprocessor">#if HAVE_UNAME</font>
00222 <font class="preprocessor"></font>    <font class="keyword">struct </font>utsname info;
00223     <font class="keywordflow">if</font>(uname(&amp;info) != -1) {
00224       cout &lt;&lt; <font class="stringliteral">". Running on "</font> &lt;&lt; info.sysname;
00225       cout &lt;&lt; <font class="charliteral">' '</font> &lt;&lt; info.release &lt;&lt; <font class="stringliteral">" ("</font>;
00226       cout &lt;&lt; info.nodename &lt;&lt; <font class="stringliteral">")."</font> &lt;&lt; endl;
00227     }
00228 <font class="preprocessor">#else</font>
00229 <font class="preprocessor"></font>    cout &lt;&lt; <font class="stringliteral">"."</font> &lt;&lt; endl;
00230 <font class="preprocessor">#endif</font>
00231 <font class="preprocessor"></font>
00232 <font class="preprocessor">#if HAVE_GETTIMEOFDAY</font>
00233 <font class="preprocessor"></font>    <font class="comment">// Information on this query</font>
00234     timeval end;
00235     gettimeofday(&amp;end, NULL);
00236     <font class="keywordtype">long</font> us = ((end.tv_sec - start.tv_sec) * 1000000)
00237       + (end.tv_usec - start.tv_usec);
00238 
00239     cout &lt;&lt; br() &lt;&lt; <font class="stringliteral">"Total time for request = "</font> &lt;&lt; us &lt;&lt; <font class="stringliteral">" us"</font>;
00240     cout &lt;&lt; <font class="stringliteral">" ("</font> &lt;&lt; (double) (us/1000000.0) &lt;&lt; <font class="stringliteral">" s)"</font>;
00241 <font class="preprocessor">#endif</font>
00242 <font class="preprocessor"></font>
00243     <font class="comment">// End of document</font>
00244     cout &lt;&lt; CGICCNS div() &lt;&lt; endl;
00245     cout &lt;&lt; body() &lt;&lt; html() &lt;&lt; endl;
00246 
00247     <font class="comment">// No chance for failure in this example</font>
00248     <font class="keywordflow">return</font> EXIT_SUCCESS;
00249   }
00250 
00251   <font class="comment">// Did any errors occur?</font>
00252   <font class="keywordflow">catch</font>(<font class="keyword">const</font> STDNS exception&amp; e) {
00253 
00254     <font class="comment">// This is a dummy exception handler, as it doesn't really do</font>
00255     <font class="comment">// anything except print out information.</font>
00256 
00257     <font class="comment">// Reset all the HTML elements that might have been used to </font>
00258     <font class="comment">// their initial state so we get valid output</font>
00259     html::reset();      head::reset();          body::reset();
00260     title::reset();     h1::reset();            h4::reset();
00261     comment::reset();   td::reset();            tr::reset(); 
00262     table::reset();     CGICCNS div::reset();   p::reset(); 
00263     a::reset();         h2::reset();            colgroup::reset();
00264 
00265     <font class="comment">// Output the HTTP headers for an HTML document, and the HTML 4.0 DTD info</font>
00266     cout &lt;&lt; HTTPHTMLHeader() &lt;&lt; HTMLDoctype(HTMLDoctype::eStrict) &lt;&lt; endl;
00267     cout &lt;&lt; html().set(<font class="stringliteral">"lang"</font>,<font class="stringliteral">"en"</font>).set(<font class="stringliteral">"dir"</font>,<font class="stringliteral">"ltr"</font>) &lt;&lt; endl;
00268 
00269     <font class="comment">// Set up the page's header and title.</font>
00270     <font class="comment">// I will put in lfs to ease reading of the produced HTML. </font>
00271     cout &lt;&lt; head() &lt;&lt; endl;
00272 
00273     <font class="comment">// Output the style sheet portion of the header</font>
00274     cout &lt;&lt; style() &lt;&lt; comment() &lt;&lt; endl;
00275     cout &lt;&lt; <font class="stringliteral">"body { color: black; background-color: white; }"</font> &lt;&lt; endl;
00276     cout &lt;&lt; <font class="stringliteral">"hr.half { width: 60%; align: center; }"</font> &lt;&lt; endl;
00277     cout &lt;&lt; <font class="stringliteral">"span.red, strong.red { color: red; }"</font> &lt;&lt; endl;
00278     cout &lt;&lt; <font class="stringliteral">"div.notice { border: solid thin; padding: 1em; margin: 1em 0; "</font>
00279          &lt;&lt; <font class="stringliteral">"background: #ddd; }"</font> &lt;&lt; endl;
00280 
00281     cout &lt;&lt; comment() &lt;&lt; style() &lt;&lt; endl;
00282 
00283     cout &lt;&lt; title(<font class="stringliteral">"GNU cgicc exception"</font>) &lt;&lt; endl;
00284     cout &lt;&lt; meta().set(<font class="stringliteral">"name"</font>, <font class="stringliteral">"author"</font>)
00285                   .set(<font class="stringliteral">"content"</font>, <font class="stringliteral">"Stephen F. Booth"</font>) &lt;&lt; endl;
00286     cout &lt;&lt; head() &lt;&lt; endl;
00287     
00288     cout &lt;&lt; body() &lt;&lt; endl;
00289     
00290     cout &lt;&lt; h1() &lt;&lt; <font class="stringliteral">"GNU cgi"</font> &lt;&lt; span(<font class="stringliteral">"cc"</font>, set(<font class="stringliteral">"class"</font>,<font class="stringliteral">"red"</font>))
00291          &lt;&lt; <font class="stringliteral">" caught an exception"</font> &lt;&lt; h1() &lt;&lt; endl; 
00292   
00293     cout &lt;&lt; CGICCNS div().set(<font class="stringliteral">"align"</font>,<font class="stringliteral">"center"</font>).set(<font class="stringliteral">"class"</font>,<font class="stringliteral">"notice"</font>) &lt;&lt; endl;
00294 
00295     cout &lt;&lt; h2(e.what()) &lt;&lt; endl;
00296 
00297     <font class="comment">// End of document</font>
00298     cout &lt;&lt; CGICCNS div() &lt;&lt; endl;
00299     cout &lt;&lt; hr().set(<font class="stringliteral">"class"</font>,<font class="stringliteral">"half"</font>) &lt;&lt; endl;
00300     cout &lt;&lt; body() &lt;&lt; html() &lt;&lt; endl;
00301     
00302     <font class="keywordflow">return</font> EXIT_SUCCESS;
00303   }
00304 }
</pre></div><!-- $Id: footer.html,v 1.2 2002/01/09 17:13:12 sbooth Exp $ -->

<hr>

<address><small>
GNU cgicc - A C++ class library for writing CGI applications<br />
Copyright &copy; 1996, 1997, 1998, 1999, 2000, 2001, 2002 
<a href="mailto:sbooth@gnu.org">Stephen F. Booth</a><br />
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.1 or
any later version published by the Free Software Foundation; with no
Invariant Sections, with no Front Cover Texts, and with no Back-Cover
Texts.<br />
Documentation generated Wed Jan 9 12:31:26 2002 for cgicc by
<a HREF="http://www.doxygen.org/index.html">doxygen</a> 1.2.13.1
</small></address>

</body>

</html>

